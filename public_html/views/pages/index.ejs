<%- include('../partials/header.ejs') %>
<div class="max-w-screen-lg my-5 mx-auto justify-center">
    <div class="my-5">
        <h1 class="text-3xl text-center block">ALL POSTS</h1>
    </div>
    <div class="flex items-center justify-between">
        <div class="search-wrapper my-3 text-center w-9/12">
            <form method="get" action="/">
                <input type="text" name="s" placeholder="Search" class="border-2 p-3 w-full"/>
            </form>
        </div>
        <div><a href="/addPost" class="focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">Add Post</a></div>
    </div>
    <div class="flex flex-wrap justify-center posts">
        <% if (allPosts) { %>
            <% allPosts.forEach(function(each){ %>
                <div class="each-post mb-3 w-1/4">
                    <div class="p-3">
                        <div class="each-post__image aspect-video">
                            <a href="/post/<%= each.id %>"><img src="<%= each.img %>" alt=""></a>
                        </div>
                        <div class="each-post__content p-3 flex-1">
                            <h2 class="text-3xl"><%= each.title %></h2>
                            <div class="each-post__descp">
                                <%= each.descp.substring(0,100); %>...
                            </div>
                            <div class="each-post__date my-3">
                                <%= new Date(each.date).toLocaleDateString(); %>
                            </div>
                            <div>
                                <a href="/post/<%= each.id %>" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">read more</a>
                            </div>
                            <div class="mt-3">
                                <form action="/post/<%= each.id %>/delete" method="POST">
                                    <button type="submit" class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-2 py-2.5 mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">Delete</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            <% }); %> 
        <% } %>         
    </div>
</div>
<%- include('../partials/footer.ejs') %>